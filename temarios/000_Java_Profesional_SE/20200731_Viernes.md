# 20200731 Viernes

## Comunicacion entre Aplicaciones Java - SOCKETS

En esta lección vamos a ver el intercambio de datos entre aplicaciones Java.

<img src="images/20200731-1.jpg">

<img src="images/20200731-2.jpg">

Aquí usamos el protocolo **TCP/IP**.

Para realizar este tipo de aplicaciones se siguen básicamente dos pasos:

1. Crear conexión entre las aplicaciones.
2. Intercambio de datos mediante operaciones I/O.

Para hacer estos dos pasos se usan dos paquetes.

* [java.net](https://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/net/package-summary.html)
* [java.io](https://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/io/package-summary.html)

Para realizar esta conexión usamos ***Sockets*** que permiten engancharme con objetos remotos.

<img src="images/20200731-3.png">

### Class `Socket`

[Class `Socket`](https://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/net/Socket.html)

<img src="images/20200731-4.png">

Tenemos el Constructor

`Socket(String host, int port)`
		
Crea un stream socket(socket de flujo) y lo conecta al host y número de puerto especificados.

Tenemos varios métodos en la clase `Socket`.

<img src="images/20200731-5.png">

Siendo unos de los más utilizados:

* `InputStream	getInputStream()`
* `OutputStream	getOutputStream()`

### :computer: `000-067_ejemplo_cliente_socket`

Esta es una aplicación muy sencilla donde creamos una aplicación cliente que trata de conectarse con la página `www.oracle.com` esperando la respuesta que nos mande.

*`Test`*

```java
package principal;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.Socket;
import java.net.UnknownHostException;

public class Test {

   public static void main(String[] args) {
      try {
         Socket sc= new Socket("www.oracle.com", 80);//80 Puerto Web
         InputStream is = sc.getInputStream();
         BufferedReader bf = new BufferedReader(new InputStreamReader(is));
			
         System.out.println("Conectando a Oracle...\n");
         String linea;
         while((linea=bf.readLine())!= null) {
            System.out.println(linea);
         }
         System.out.println("\nTermino Conección a Oracle");
         sc.close();
      } catch (UnknownHostException e) {
         e.printStackTrace();
      } catch (IOException e) {
         e.printStackTrace();
      }
   }
}
```

<img src="images/20200731-6.png">

