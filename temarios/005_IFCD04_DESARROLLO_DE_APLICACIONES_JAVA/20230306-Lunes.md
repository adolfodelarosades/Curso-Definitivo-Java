# 20230306 Lunes

## Maven

Maven es un gestor de dependencias y lo vamos a empezar a usar en nuestros proyectos.

Vamos a crear un proyecto Maven como sigue.

<img width="614" alt="image" src="https://user-images.githubusercontent.com/23094588/224430785-277a1a6e-db64-4a27-ba26-3781c1eceed5.png">

Vamos a presionar **Next**.

<img width="634" alt="image" src="https://user-images.githubusercontent.com/23094588/224431117-b4e434bb-490e-4877-b145-b8bf5a8c9d64.png">

Nos permite crear un proyecto muy sencillo en el que si marco esa opción me salto el arquetipo de Maven, el arquetipo es una especie de plantilla. Dependiendo de la aplicación que vayamos a crear vamos a usar uno u otro arquetipo.

Vamos a dejar las opciones por default y presionamos **Next**.

<img width="943" alt="image" src="https://user-images.githubusercontent.com/23094588/224431971-130ee7f0-bf5d-43ec-b812-3645d0b924b1.png">

En el filtro escribimos **maven-archetype-simple**

<img width="941" alt="image" src="https://user-images.githubusercontent.com/23094588/224433951-872e5c20-2b55-4034-8364-b651d5a9ef64.png">

Vamos a seleccionar la segunda opción, este arquetipo para una aplicación JSE. 

<img width="945" alt="image" src="https://user-images.githubusercontent.com/23094588/224434344-6117f599-35e6-4b13-9c52-a8250b5f958d.png">

y vamos a presionar **Next**

<img width="944" alt="image" src="https://user-images.githubusercontent.com/23094588/224434462-22a21eef-a93e-4d3b-9d52-128f334ba150.png">

Vamos a meter los siguientes datos.

<img width="938" alt="image" src="https://user-images.githubusercontent.com/23094588/224435126-c125b148-c090-4179-87c4-cab17b7cc621.png">

Y vamos a presionar **Finish**.

<img width="1512" alt="image" src="https://user-images.githubusercontent.com/23094588/224435624-994e86b7-f6eb-4417-bfdd-25ef26745d86.png">

En la consola nos pide que confirmemos con **Y**.

<img width="1512" alt="image" src="https://user-images.githubusercontent.com/23094588/224435804-f0620042-3293-4abf-b06b-afa7f6c3ff44.png">

Nos pone **BUILD SUCCESS** y crea el proyecto con la siguiente estructura.

<img width="439" alt="image" src="https://user-images.githubusercontent.com/23094588/224436476-03a9d187-5d70-4dcd-add8-839c70d22dcd.png">

La estructura de un Proyecto Maven es estandar. Tenemos **`src/main/java`** donde se deben colocar los archivos de código Java independientemente del tipo de aplicación.

Dentro del paquete que indicamos **`jse.jpa`** nos ha creado el archivo **`App.java`**.

<img width="1512" alt="image" src="https://user-images.githubusercontent.com/23094588/224439524-f0b784c6-e4ce-4b6d-9074-34c4e8ce8c4e.png">

En la carpeta **`src/test/java`** van todos los tests unitarios.

También tenemos el archivo **`pom.xml`** el cual es un archivo fundamental en un proyecto Maven.

```xml
<?xml version="1.0" encoding="UTF-8"?>

<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>aa</groupId>
  <artifactId>bb</artifactId>
  <version>0.0.1-SNAPSHOT</version>

  <name>bb</name>
  <description>A simple bb.</description>
  <!-- FIXME change it to the project's website -->
  <url>http://www.example.com</url>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <maven.compiler.source>1.7</maven.compiler.source>
    <maven.compiler.target>1.7</maven.compiler.target>
  </properties>

  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>3.8.1</version>
    </dependency>
  </dependencies>

  <build>
    <pluginManagement><!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) -->
      <plugins>
        <plugin>
          <artifactId>maven-clean-plugin</artifactId>
          <version>3.1.0</version>
        </plugin>
        <plugin>
          <artifactId>maven-site-plugin</artifactId>
          <version>3.7.1</version>
        </plugin>
        <plugin>
          <artifactId>maven-project-info-reports-plugin</artifactId>
          <version>3.0.0</version>
        </plugin>
        <!-- see http://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_jar_packaging -->
        <plugin>
          <artifactId>maven-resources-plugin</artifactId>
          <version>3.0.2</version>
        </plugin>
        <plugin>
          <artifactId>maven-compiler-plugin</artifactId>
          <version>3.8.0</version>
        </plugin>
        <plugin>
          <artifactId>maven-surefire-plugin</artifactId>
          <version>2.22.1</version>
        </plugin>
        <plugin>
          <artifactId>maven-jar-plugin</artifactId>
          <version>3.0.2</version>
        </plugin>
        <plugin>
          <artifactId>maven-install-plugin</artifactId>
          <version>2.5.2</version>
        </plugin>
        <plugin>
          <artifactId>maven-deploy-plugin</artifactId>
          <version>2.8.2</version>
        </plugin>
      </plugins>
    </pluginManagement>
  </build>

  <reporting>
    <plugins>
      <plugin>
        <artifactId>maven-project-info-reports-plugin</artifactId>
      </plugin>
    </plugins>
  </reporting>
</project>
```

Dentro del archivo **`pom.xml`** tenemos tres elementos conocidos como las **Coordenadas del proyecto**, permiten identificar de forma única la aplicación a nivel red. En el **`groupId`** normalmente se suele colocar el dominio de la aplicación que es única en la red, en **`artifactId`** se suele colocar el nombre de la aplicación y finalmente tenemos la **`version`** la palabra **`SNAPSHOT`** indica que la aplicación esta en desarrollo, cuando la aplicación se va a liberar se quita **`SNAPSHOT`** y tendremos una RELEASE, 



```xml
  <!-- Coordenadas del proyecto -->
  <groupId>aa</groupId>
  <artifactId>bb</artifactId>
  <version>0.0.1-SNAPSHOT</version>
```

Vamos a hacer unos cambios en nuestro archivo **`pom.xml`**.

<img width="527" alt="image" src="https://user-images.githubusercontent.com/23094588/224443075-f47b4894-4219-47e8-bd8a-bd7f9190d14f.png">

Esta sección de la **Descripción** la vamos a eliminar.

<img width="635" alt="image" src="https://user-images.githubusercontent.com/23094588/224443148-e54c5dea-6d0a-4eda-b9da-0f8ae7c95d0f.png">

Tenemos una sección de **Propiedades**. Donde se indica el juego de carácteres a usar, la versión de Java para compilar y para ejecutar, por defecto el arquetipo esta usando la versión 1.7.

<img width="823" alt="image" src="https://user-images.githubusercontent.com/23094588/224443249-5a13addd-3c2a-44cf-a7df-5d64bd77679c.png">

Vamos a cambiar la versión a la 1.8

<img width="824" alt="image" src="https://user-images.githubusercontent.com/23094588/224443613-4bb50dd8-72c0-423f-925c-b1cc619683ce.png">

Después tenemos el otro punto fuerte de Maven, las **Dependencias**. Las **Dependencias** son ficheros **.jar** que contienen cógigo que vamos a usar dentro de nuestro proyecto.

<img width="457" alt="image" src="https://user-images.githubusercontent.com/23094588/224443756-036a543e-ed4d-44f7-b870-69772450fb04.png">

Podemos ver el archivo **`.jar`** en las dependencias Maven.

<img width="1263" alt="image" src="https://user-images.githubusercontent.com/23094588/224444067-58ed8bfa-f924-4e55-8fb9-45d83bbc67f2.png">

Las dependencias las busca dentro de repositorios Locales o Remotos. El repositorio local lo tenemos dentro de nuestro ordenador en la carpeta de nuestro usuario.

<img width="1512" alt="image" src="https://user-images.githubusercontent.com/23094588/224444459-0972e387-fa0b-4282-88ed-4f69d3fcafca.png">

Posteriormente tenemos los **Plugins de Administración**.

<img width="1512" alt="image" src="https://user-images.githubusercontent.com/23094588/224444876-bff27255-4568-429d-ba8d-a0dea9f360f4.png">

Y también los los **Plugins de Reporte**.

<img width="801" alt="image" src="https://user-images.githubusercontent.com/23094588/224444960-539e1ecc-826e-47b3-b84d-5014a2708cf5.png">

En este caso vamos a eliminar ambas secciones de Pluging por que no los vamos a usar para este proyecto.

Asi que el archivo **`pom.xml`** final nos queda así.

<img width="1473" alt="image" src="https://user-images.githubusercontent.com/23094588/224445561-04cadbba-2d5a-4933-9d39-d0f381385b2e.png">

```xml
<?xml version="1.0" encoding="UTF-8"?>

<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <!-- Coordenadas del proyecto -->
  <groupId>curso.cas.jee.web</groupId>
  <artifactId>022-MVN-JPA01</artifactId>
  <version>1.0-SNAPSHOT</version>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <maven.compiler.source>1.8</maven.compiler.source>
    <maven.compiler.target>1.8</maven.compiler.target>
  </properties>

  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>4.13.1</version>
    </dependency>
  </dependencies>

</project>
```

Como hemos cambiado el archivo **`pom.xml`** es necesario presionar botón derecho y hacer un **Maven Update Proyect**.

<img width="1512" alt="image" src="https://user-images.githubusercontent.com/23094588/224446223-c8cc24f2-4990-4364-86fc-dd78029d446b.png">

Nos sale la siguiente ventana 

<img width="609" alt="image" src="https://user-images.githubusercontent.com/23094588/224446713-af5bcbab-e477-4c63-a890-7c609157a1a5.png">

Donde van a marcar **Force Update Snapshps/Releases**.

<img width="602" alt="image" src="https://user-images.githubusercontent.com/23094588/224446971-54060d37-fa3d-4263-b67a-615188ce7224.png">

Y presionamos **OK**.

Nuestro proyecto se actualiza a 

<img width="605" alt="image" src="https://user-images.githubusercontent.com/23094588/224447093-31af1138-3523-4442-8960-dc7235c28ca4.png">

Hay dos cosas más que podemos agregar en **`pom.xml`** un elemento para indicar el nombre del proyecto con la etiqueta **`name`**



















